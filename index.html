<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EXPERTA INMOBILIARIA</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <style>
    :root {
      --accent: #0b76ff;
      --highlight: #ff5e3a;
    }
    body { margin: 0; padding: 0; }
    nav.site-nav {
      background: #fff;
      border-bottom: 1px solid #eee;
      padding: 1rem 2rem;
      display: flex; align-items: center; justify-content: space-between;
    }
    nav.site-nav ul {
      list-style: none; display: flex; gap: 1rem; margin: 0; padding: 0;
    }
    nav.site-nav ul li a { text-decoration: none; color: #333; font-weight: 500; }
    nav.site-nav ul li a:hover { color: var(--accent); }
    .hero {
      background: url('https://source.unsplash.com/1600x600/?realestate,house') center/cover no-repeat;
      color: white; padding: 4rem 2rem; text-shadow: 0 2px 8px rgba(0,0,0,0.5); margin-bottom: 2rem;
    }
    .hero h1 { margin: 0; font-size: 2.5rem; }
    .hero p { margin-top: 1rem; font-size: 1.25rem; }
    .cards { display: grid; grid-template-columns: repeat(auto-fit,minmax(280px,1fr)); gap:1.5rem; }
    .card { border: 1px solid #ddd; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); background: #fff; }
    .card img { width:100%; height:200px; object-fit:cover; }
    .card-content { padding: 1rem; }
    .card-content h3 { margin: 0 0 .5rem 0; }
    .card-content .muted { font-size: .9rem; color: #666; margin-bottom: .5rem; }
    .tag { display: inline-block; padding: .2rem .6rem; border-radius: 4px; font-size: .75rem; font-weight: 600; margin-right: .5rem; background: var(--accent); color: white; }
    .tag.offer { background: var(--highlight); }
    footer.site-footer { background: #f9f9f9; padding: 2rem; margin-top: 3rem; color: #555; }
    .socials a { margin-right: .5rem; text-decoration: none; color: #555; }
    .socials a:hover { color: var(--accent); }
    .about-section { padding: 2rem; background: #f4f4f4; margin-top: 3rem; }
    /* Modal */
    #detailModal {
      display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5); overflow: auto; padding: 2rem;
    }
    #detailContent {
      background: #fff; border-radius: 8px; max-width: 700px; margin: auto; padding: 1rem;
    }
    #detailContent img { width: 100%; height: 300px; object-fit: cover; border-radius: 8px; margin-bottom: 1rem; }
    #dClose { float: right; cursor: pointer; font-size: 1.5rem; }
    /* Ocultar secciones */
    .hidden { display: none; }
  </style>
</head>
<body>
  <nav class="site-nav">
    <div class="logo"><strong>EXPERTA INMOBILIARIA</strong></div>
    <ul>
      <li><a href="#inicio" onclick="showSection('inicio')">Inicio</a></li>
      <li><a href="#ventas" onclick="showSection('listado')">Ventas</a></li>
      <li><a href="#alquileres" onclick="showSection('listado')">Alquileres</a></li>
      <li><a href="#anticretico" onclick="showSection('listado')">Anticrético</a></li>
      <li><a href="#contacto" onclick="showSection('quienes')">Contáctenos</a></li>
      <li><a href="#admin" onclick="showSection('admin')">Admin</a></li>
    </ul>
  </nav>

  <main class="container">
    <section class="hero" id="inicio">
      <h1>Bienvenido a Experta Inmobiliaria</h1>
      <p>Encuentra la propiedad de tus sueños: compra, venta o alquiler.</p>
    </section>

    <!-- Listado público -->
    <section id="listado">
      <h2>Propiedades destacadas</h2>
      <div id="cards" class="cards"></div>
      <p id="emptyNotice" class="muted" style="margin-top:1rem;">No hay publicaciones todavía.</p>
    </section>

    <!-- Admin -->
    <section id="admin" class="hidden">
      <h2>Panel de administración</h2>
      <form id="propForm">
        <div class="grid">
          <label for="title">Título</label>
          <input id="title" name="title" required placeholder="Ej: Departamento 2D en Recoleta">
          <label for="price">Precio</label>
          <input id="price" name="price" type="number" min="0" placeholder="120000">
          <label for="location">Ubicación</label>
          <input id="location" name="location" placeholder="Ciudad, Barrio">
          <label for="area">Área (m²)</label>
          <input id="area" name="area" type="number" min="0" placeholder="120">
          <label for="bedrooms">Dormitorios</label>
          <input id="bedrooms" name="bedrooms" type="number" min="0" placeholder="2">
          <label for="bathrooms">Baños</label>
          <input id="bathrooms" name="bathrooms" type="number" min="0" placeholder="1">
          <label for="desc">Descripción</label>
          <textarea id="desc" name="desc" rows="4" placeholder="Descripción breve del inmueble"></textarea>
          <label for="img">URL imagen (opcional)</label>
          <input id="img" name="img" placeholder="https://...">
        </div>
        <input type="hidden" id="propId">
        <div style="margin-top:1rem;">
          <button type="submit" class="primary">Guardar publicación</button>
          <button type="button" id="cancelEdit" class="secondary">Cancelar</button>
        </div>
      </form>
    </section>

    <!-- Modal detalle -->
    <div id="detailModal">
      <div id="detailContent">
        <span id="dClose">&times;</span>
        <img id="d-img" src="" alt="Imagen inmueble">
        <h3 id="d-title"></h3>
        <p id="d-location" class="muted"></p>
        <p id="d-area" class="muted"></p>
        <p id="d-bedrooms" class="muted"></p>
        <p id="d-bathrooms" class="muted"></p>
        <p id="d-price"></p>
        <p id="d-desc"></p>
        <a id="waLink" class="contrast" target="_blank">Consultar por WhatsApp</a>
      </div>
    </div>

    <!-- Quiénes somos -->
    <section class="about-section hidden" id="quienes">
      <h2>Quiénes somos</h2>
      <p>Experta Inmobiliaria es una empresa dedicada a ayudar a nuestros clientes a encontrar, comprar, vender o alquilar propiedades. Con profesionalismo, transparencia y compromiso.</p>
      <p><strong>Teléfono:</strong> +591 70000000</p>
      <p><strong>Email:</strong> contacto@experta.com</p>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>© 2025 Experta Inmobiliaria. Todos los derechos reservados.</p>
      <div>Dirección: Ciudad, Barrio, Bolivia</div>
      <div class="socials">
        <a href="#" target="_blank">Facebook</a>
        <a href="#" target="_blank">Instagram</a>
        <a href="#" target="_blank">TikTok</a>
      </div>
    </div>
  </footer>

  <script>
    const STORAGE_KEY = 'experta_posts_v4';
    const WA_NUMBER = '+59170000000'; // <-- cámbialo por tu WhatsApp oficial

    const form = document.getElementById('propForm');
    const cardsEl = document.getElementById('cards');
    const emptyNotice = document.getElementById('emptyNotice');
    const propIdInput = document.getElementById('propId');

    const modal = document.getElementById('detailModal');
    const dTitle = document.getElementById('d-title');
    const dLocation = document.getElementById('d-location');
    const dArea = document.getElementById('d-area');
    const dBedrooms = document.getElementById('d-bedrooms');
    const dBathrooms = document.getElementById('d-bathrooms');
    const dPrice = document.getElementById('d-price');
    const dDesc = document.getElementById('d-desc');
    const dImg = document.getElementById('d-img');
    const waLink = document.getElementById('waLink');
    const dClose = document.getElementById('dClose');

    function uid(){ return 'p_' + Date.now() + '_' + Math.floor(Math.random()*9000+1000); }
    function readPosts(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)) || []; } catch(e){ return []; } }
    function writePosts(posts){ localStorage.setItem(STORAGE_KEY, JSON.stringify(posts)); }

    function render(){
      const posts = readPosts();
      cardsEl.innerHTML = '';
      if(posts.length === 0){ emptyNotice.style.display = 'block'; return; }
      emptyNotice.style.display = 'none';
      posts.slice().reverse().forEach(post => {
        const card = document.createElement('article');
        card.className = 'card';
        const img = document.createElement('img');
        img.src = post.img || `https://source.unsplash.com/600x420/?house,apartment&sig=${post.id}`;
        const content = document.createElement('div');
        content.className = 'card-content';
        content.innerHTML = `
          <h3>${post.title || 'Sin título'}</h3>
          <p class="muted">${post.location || ''}</p>
          <p class="muted">${post.area ? post.area+' m²' : ''} ${post.bedrooms ? '• '+post.bedrooms+' dorm' : ''} ${post.bathrooms ? '• '+post.bathrooms+' baños' : ''}</p>
          <p><span class="tag">$ ${post.price || '—'}</span></p>
        `;
        const actions = document.createElement('p');
        const viewBtn = document.createElement('button'); viewBtn.textContent='Ver'; viewBtn.className='secondary'; viewBtn.onclick=()=>openDetail(post.id);
        const editBtn = document.createElement('button'); editBtn.textContent='Editar'; editBtn.className='warning'; editBtn.onclick=()=>loadForEdit(post.id);
        const delBtn = document.createElement('button'); delBtn.textContent='Eliminar'; delBtn.className='danger'; delBtn.onclick=()=>{ if(confirm('¿Eliminar publicación?')) deletePost(post.id); };
        actions.append(viewBtn, editBtn, delBtn);
        content.append(actions);
        card.append(img, content);
        cardsEl.append(card);
      });
    }

    form.onsubmit = e => {
      e.preventDefault();
      const posts = readPosts();
      const data = {
        id: propIdInput.value || uid(),
        title: form.title.value.trim(),
        price: form.price.value.trim(),
        location: form.location.value.trim(),
        area: form.area.value.trim(),
        bedrooms: form.bedrooms.value.trim(),
        bathrooms: form.bathrooms.value.trim(),
        desc: form.desc.value.trim(),
        img: form.img.value.trim()
      };
      if(propIdInput.value){
        const idx = posts.findIndex(p=>p.id===propIdInput.value);
        if(idx>=0) posts[idx]=data;
      } else posts.push(data);
      writePosts(posts); form.reset(); propIdInput.value=''; render();
    };

    function loadForEdit(id){
      const post = readPosts().find(p=>p.id===id); if(!post) return;
      form.title.value = post.title||''; form.price.value=post.price||'';
      form.location.value=post.location||''; form.area.value=post.area||'';
      form.bedrooms.value=post.bedrooms||''; form.bathrooms.value=post.bathrooms||'';
      form.desc.value=post.desc||''; form.img.value=post.img||'';
      propIdInput.value=post.id;
      showSection('admin');
    }
    function deletePost(id){ let posts=readPosts().filter(p=>p.id!==id); writePosts(posts); render(); }
    function openDetail(id){
      const post = readPosts().find(p=>p.id===id); if(!post) return;
      dTitle.textContent = post.title||'';
      dLocation.textContent = post.location||'';
      dArea.textContent = post.area? `Área: ${post.area} m²` : '';
      dBedrooms.textContent = post.bedrooms? `Dormitorios: ${post.bedrooms}` : '';
      dBathrooms.textContent = post.bathrooms? `Baños: ${post.bathrooms}` : '';
      dPrice.textContent = post.price? `Precio: $${post.price}` : '';
      dDesc.textContent = post.desc||'';
      dImg.src = post.img || `https://source.unsplash.com/600x420/?house,apartment&sig=${post.id}`;
      const message = encodeURIComponent(`Hola, estoy interesado en la propiedad: ${post.title} (${post.location}).`);
      waLink.href = `https://wa.me/${WA_NUMBER.replace(/\D/g,'')}?text=${message}`;
      modal.style.display='block';
    }
    dClose.onclick=()=>modal.style.display='none';
    window.onclick=e=>{ if(e.target==modal) modal.style.display='none'; };
    document.getElementById('cancelEdit').onclick=()=>{ form.reset(); propIdInput.value=''; };

    function showSection(id){
      document.querySelectorAll('main section').forEach(s=>s.classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');
    }

    render();
  </script>
</body>
</html>
